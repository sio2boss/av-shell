#!/usr/bin/env node

/**
 * List prompt example
 */

"use strict";
var prompts = require("prompts");
require('shelljs/global');


// print process.argv
var argv_choices = [];
var args = process.argv.slice(2);
var variableName=args[0];
if ( variableName === '-h') {
  console.log("Provides a chooser to user with provided inputs");
  process.exit(0);
}
args = args.slice(1);
args.forEach(function (val, index, array) {
  argv_choices.push({title: val, value: val});
});

var questions = [
  {
    type: "checkbox",
    name: "value",
    message: "Which do you want?",
    choices: argv_choices
  }
];


var questions = [
  {
    type: "multiselect",
    name: "value",
    message: "Which do you want?",
    choices: argv_choices,
    hint: '- Space to select. Return to submit'
  }
];

(async function chooseFun() {
  var answers = await prompts(questions);
  return answers.value;
})().then( (answer) => {
  exec('setpv ' + variableName + ' ' + answer);
})
